"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.InputsCollection = void 0;
const common_1 = require("@fleet-sdk/common");
const errors_1 = require("../../errors");
const ergoUnsignedInput_1 = require("../ergoUnsignedInput");
const collection_1 = require("./collection");
class InputsCollection extends collection_1.Collection {
    constructor(boxes) {
        super();
        if ((0, common_1.isDefined)(boxes)) {
            this.add(boxes);
        }
    }
    _map(input) {
        return input instanceof ergoUnsignedInput_1.ErgoUnsignedInput ? input : new ergoUnsignedInput_1.ErgoUnsignedInput(input);
    }
    _addOne(box) {
        if (this._items.some((item) => item.boxId === box.boxId)) {
            throw new errors_1.DuplicateInputError(box.boxId);
        }
        return super._addOne(box);
    }
    remove(boxIdOrIndex) {
        let index = -1;
        if (typeof boxIdOrIndex === "number") {
            if (this._isIndexOutOfBounds(boxIdOrIndex)) {
                throw new RangeError(`Index '${boxIdOrIndex}' is out of range.`);
            }
            index = boxIdOrIndex;
        }
        else {
            index = this._items.findIndex((box) => box.boxId === boxIdOrIndex);
            if (this._isIndexOutOfBounds(index)) {
                throw new errors_1.NotFoundError("The input you are trying to remove is not present in the inputs collection.");
            }
        }
        if (index > -1) {
            this._items.splice(index, 1);
        }
        return this.length;
    }
}
exports.InputsCollection = InputsCollection;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXRzQ29sbGVjdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9tb2RlbHMvY29sbGVjdGlvbnMvaW5wdXRzQ29sbGVjdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFDQSw4Q0FBOEM7QUFDOUMseUNBQWtFO0FBQ2xFLDREQUF5RDtBQUN6RCw2Q0FBMEM7QUFFMUMsTUFBYSxnQkFBaUIsU0FBUSx1QkFBMEM7SUFJOUUsWUFBWSxLQUE4QjtRQUN4QyxLQUFLLEVBQUUsQ0FBQztRQUVSLElBQUksSUFBQSxrQkFBUyxFQUFDLEtBQUssQ0FBQyxFQUFFO1lBQ3BCLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDakI7SUFDSCxDQUFDO0lBRWtCLElBQUksQ0FBQyxLQUFzQztRQUM1RCxPQUFPLEtBQUssWUFBWSxxQ0FBaUIsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLHFDQUFpQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ25GLENBQUM7SUFFa0IsT0FBTyxDQUFDLEdBQWdCO1FBQ3pDLElBQUksSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLEtBQUssR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQ3hELE1BQU0sSUFBSSw0QkFBbUIsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDMUM7UUFFRCxPQUFPLEtBQUssQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDNUIsQ0FBQztJQUlNLE1BQU0sQ0FBQyxZQUE0QjtRQUN4QyxJQUFJLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQztRQUNmLElBQUksT0FBTyxZQUFZLEtBQUssUUFBUSxFQUFFO1lBQ3BDLElBQUksSUFBSSxDQUFDLG1CQUFtQixDQUFDLFlBQVksQ0FBQyxFQUFFO2dCQUMxQyxNQUFNLElBQUksVUFBVSxDQUFDLFVBQVUsWUFBWSxvQkFBb0IsQ0FBQyxDQUFDO2FBQ2xFO1lBRUQsS0FBSyxHQUFHLFlBQVksQ0FBQztTQUN0QjthQUFNO1lBQ0wsS0FBSyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsS0FBSyxLQUFLLFlBQVksQ0FBQyxDQUFDO1lBRW5FLElBQUksSUFBSSxDQUFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUNuQyxNQUFNLElBQUksc0JBQWEsQ0FDckIsNkVBQTZFLENBQzlFLENBQUM7YUFDSDtTQUNGO1FBRUQsSUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDLEVBQUU7WUFDZCxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7U0FDOUI7UUFFRCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDckIsQ0FBQztDQUNGO0FBbERELDRDQWtEQyJ9